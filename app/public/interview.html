<!doctype html>
<html class="dark" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>StarMock - Mission Control</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons+Round"
      rel="stylesheet"
    />

    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>

    <!-- Shared Tailwind Config -->
    <script src="/components/tailwind-config.js"></script>

    <!-- Global Styles -->
    <link href="/styles/global.css" rel="stylesheet" />
  </head>

  <body
    class="bg-background-light dark:bg-background-dark text-slate-900 dark:text-slate-100 min-h-screen flex flex-col font-display"
  >
    <!-- Background Grid -->
    <div class="fixed inset-0 grid-bg pointer-events-none opacity-40"></div>

    <!-- Header -->
    <div id="site-header"></div>

    <!-- Spacer -->
    <div class="h-12 w-full"></div>

    <!-- Main Content -->
    <main class="flex-1 px-5 py-6 relative z-10 max-w-6xl mx-auto w-full">
      <section class="mb-8">
        <h2 class="text-2xl font-bold mb-1">Mission Control</h2>
        <p class="text-slate-500 dark:text-slate-400 text-sm">
          Ready to level up your interview performance?
        </p>
        <div
          id="career-context-badge"
          class="hidden mt-3 inline-flex items-center gap-2 px-3 py-1 rounded-full bg-primary/10 text-primary text-xs font-bold uppercase tracking-wide"
        >
          <span>AIR</span>
          <span id="career-context-text" class="normal-case font-semibold"></span>
          <button
            id="career-context-edit-btn"
            type="button"
            class="normal-case font-semibold underline underline-offset-2 hover:opacity-80"
          >
            Edit
          </button>
        </div>
      </section>

      <section>
        <div class="flex items-center justify-between mb-5">
          <h3 class="text-lg font-bold flex items-center gap-2">
            Recommended
            <span
              class="text-primary text-xs bg-primary/10 px-2 py-0.5 rounded-full uppercase tracking-wider"
            >
              For You
            </span>
          </h3>
        </div>

        <div class="space-y-4">
          <!-- Question Card -->
          <div
            class="question-card bg-card-bg dark:bg-card-bg rounded-3xl p-6 border border-slate-800 shadow-xl shadow-black/5"
          >
            <div class="flex justify-between items-start mb-4">
              <span
                id="question-meta"
                class="px-3 py-1 bg-rose-500/10 text-rose-500 text-[10px] font-bold uppercase tracking-widest rounded-full"
              >
                Loading Question
              </span>
            </div>

            <h4
              id="question-prompt"
              class="text-lg font-semibold leading-snug mb-6"
            >
              Loading interview prompt...
            </h4>

            <!-- Read Aloud (Text-to-Speech) -->
            <button
              id="read-aloud-btn"
              type="button"
              class="hidden mb-4 inline-flex items-center gap-1.5 px-3 py-1.5 rounded-xl bg-slate-700 hover:bg-slate-600 text-slate-200 text-xs font-bold uppercase tracking-wide transition-colors focus:outline-none focus:ring-2 focus:ring-primary/60"
              aria-label="Read question aloud"
              aria-live="polite"
            >
              <span class="material-icons-round text-base" aria-hidden="true">volume_up</span>
              <span id="read-aloud-label">Read Aloud</span>
            </button>
            <div
              class="flex items-center justify-between pt-4 border-t border-slate-800"
            >
              <button
                id="start-interview-btn"
                class="start-btn bg-primary hover:opacity-90 transition-opacity text-background-dark px-6 py-2.5 rounded-xl font-bold text-sm flex items-center gap-2"
                disabled
              >
                Start
                <span class="material-icons-round text-base">play_arrow</span>
              </button>
            </div>

            <!-- Recording Indicator -->
            <div class="recording mt-4 flex items-center gap-3">
              <span id="recording-emoji" class="recording-emoji text-xl hidden"
                >ðŸŽ¤</span
              >
              <p
                id="recording-text"
                class="recording-text text-sm font-semibold text-red-500"
              >
                Awaiting start
              </p>
              <p id="recording-duration" class="text-xs text-slate-400 hidden">
                00:00
              </p>
            </div>

            <div class="mt-3 flex flex-wrap gap-2">
              <button
                id="start-recording-btn"
                class="hidden bg-rose-500 hover:bg-rose-500/90 text-white px-4 py-2 rounded-xl text-xs font-bold uppercase tracking-wide"
              >
                Start Recording
              </button>
              <button
                id="stop-recording-btn"
                class="hidden bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-xl text-xs font-bold uppercase tracking-wide"
                disabled
              >
                Stop Recording
              </button>
            </div>

            <!-- Answer Input -->
            <textarea
              id="response-input"
              class="answer-input hidden mt-4 w-full p-3 rounded-xl border border-slate-700 bg-slate-900 text-slate-100"
              placeholder="Review or type your STAR answer transcript here..."
            ></textarea>
            <!-- Live transcript indicator (browser speech-to-text) -->
            <div
              id="live-transcript-indicator"
              class="hidden mt-3 items-center gap-2"
            >
              <span class="relative flex h-3 w-3">
                <span
                  class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"
                ></span>
                <span
                  class="relative inline-flex rounded-full h-3 w-3 bg-red-500"
                ></span>
              </span>
              <span
                id="live-transcript-status"
                class="text-xs text-red-400 font-semibold"
              >
                Listening... speak clearly
              </span>
            </div>
            <div
              id="transcribing-indicator"
              class="hidden mt-3 items-center gap-2"
            >
              <svg
                class="animate-spin h-4 w-4 text-primary"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
              >
                <circle
                  class="opacity-25"
                  cx="12"
                  cy="12"
                  r="10"
                  stroke="currentColor"
                  stroke-width="4"
                ></circle>
                <path
                  class="opacity-75"
                  fill="currentColor"
                  d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"
                ></path>
              </svg>
              <span
                id="transcribing-status-text"
                class="text-xs text-primary font-semibold"
              >
                Transcribing your audio...
              </span>
            </div>
            <p
              id="transcript-warning"
              class="hidden mt-2 text-xs text-amber-400"
            >
              Transcript confidence is low. Review and edit before submitting.
            </p>
            <div class="mt-4 flex items-center gap-3">
              <button
                id="submit-response-btn"
                class="submit-btn hidden bg-primary hover:bg-primary/90 text-background-dark px-5 py-2 rounded-xl font-bold"
                disabled
              >
                Submit Answer
              </button>
              <p id="interview-message" class="text-sm text-slate-400"></p>
            </div>
          </div>
        </div>
      </section>

      <section class="mt-8 mb-24">
        <div class="grid grid-cols-2 gap-4">
          <div class="bg-slate-800/50 rounded-2xl p-4">
            <p
              class="text-[10px] text-slate-400 uppercase font-bold tracking-widest mb-1"
            >
              Avg Score
            </p>
            <div class="flex items-baseline gap-2">
              <span class="text-2xl font-bold">82%</span>
              <span class="text-[10px] text-primary font-bold">+5%</span>
            </div>
          </div>

          <div class="bg-slate-800/50 rounded-2xl p-4">
            <p
              class="text-[10px] text-slate-400 uppercase font-bold tracking-widest mb-1"
            >
              Time Spent
            </p>
            <div class="flex items-baseline gap-2">
              <span class="text-2xl font-bold">12.5h</span>
              <span class="text-[10px] text-primary font-bold">+2h</span>
            </div>
          </div>
        </div>
      </section>
    </main>

    <div
      id="career-profile-overlay"
      class="hidden fixed inset-0 z-40 bg-slate-950/80 backdrop-blur-sm px-4 py-6"
    >
      <div
        class="max-w-xl mx-auto bg-card-bg border border-slate-800 rounded-3xl p-6 md:p-8 shadow-2xl mt-10"
      >
        <div class="mb-5">
          <p
            class="text-[10px] text-primary uppercase tracking-[0.2em] font-bold mb-2"
          >
            AIR Setup
          </p>
          <h3 class="text-xl font-bold mb-2">Set your target interview role</h3>
          <p class="text-sm text-slate-400">
            Add your role focus so interview prompts and AI feedback are more
            relevant.
          </p>
        </div>

        <form id="career-profile-form" class="space-y-4">
          <div>
            <label
              for="career-job-title"
              class="block text-xs uppercase tracking-wide text-slate-400 font-bold mb-1"
            >
              Job Title
            </label>
            <input
              id="career-job-title"
              type="text"
              class="w-full rounded-xl border border-slate-700 bg-slate-900 text-slate-100 px-3 py-2.5 text-sm"
              placeholder="Software Engineer"
              maxlength="120"
              required
            />
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
            <div>
              <label
                for="career-industry"
                class="block text-xs uppercase tracking-wide text-slate-400 font-bold mb-1"
              >
                Industry
              </label>
              <select
                id="career-industry"
                class="w-full rounded-xl border border-slate-700 bg-slate-900 text-slate-100 px-3 py-2.5 text-sm"
                required
              >
                <option value="">Select industry</option>
                <option value="technology">Technology</option>
                <option value="finance">Finance</option>
                <option value="healthcare">Healthcare</option>
                <option value="education">Education</option>
                <option value="retail">Retail</option>
                <option value="manufacturing">Manufacturing</option>
                <option value="government">Government</option>
                <option value="consulting">Consulting</option>
                <option value="media">Media</option>
                <option value="other">Other</option>
              </select>
            </div>

            <div>
              <label
                for="career-seniority"
                class="block text-xs uppercase tracking-wide text-slate-400 font-bold mb-1"
              >
                Seniority
              </label>
              <select
                id="career-seniority"
                class="w-full rounded-xl border border-slate-700 bg-slate-900 text-slate-100 px-3 py-2.5 text-sm"
                required
              >
                <option value="">Select level</option>
                <option value="entry">Entry</option>
                <option value="mid">Mid</option>
                <option value="senior">Senior</option>
              </select>
            </div>
          </div>

          <div>
            <label
              for="career-job-description"
              class="block text-xs uppercase tracking-wide text-slate-400 font-bold mb-1"
            >
              Job Description (Optional)
            </label>
            <textarea
              id="career-job-description"
              class="w-full rounded-xl border border-slate-700 bg-slate-900 text-slate-100 px-3 py-2.5 text-sm min-h-[96px]"
              placeholder="Paste key responsibilities to tailor interview prompts..."
              maxlength="3000"
            ></textarea>
          </div>

          <p
            id="career-profile-message"
            class="hidden text-sm text-red-400"
            role="alert"
          ></p>

          <div class="flex flex-wrap items-center gap-2 pt-2">
            <button
              id="career-profile-submit-btn"
              type="submit"
              class="bg-primary hover:bg-primary/90 text-background-dark px-4 py-2 rounded-xl font-bold text-sm"
            >
              Save and continue
            </button>
            <button
              id="career-profile-skip-btn"
              type="button"
              class="bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-xl font-bold text-sm"
            >
              Skip for now
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Footer -->
    <div id="site-footer"></div>

    <!-- JS Components -->
    <script src="/components/auth-check.js" defer></script>
    <script src="/components/header.js" defer></script>
    <script src="/components/footer.js" defer></script>
    <script src="/components/interview-redirect.js" defer></script>
  </body>
</html>
